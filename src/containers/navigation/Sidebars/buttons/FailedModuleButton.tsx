import { Alert, Button, DecorationWrapper, Wrapper } from './styles.ts';
import { useSetupStore } from '@app/store/useSetupStore.ts';
import { setupStoreSelectors } from '@app/store/selectors/setupStoreSelectors.ts';
import { setDialogToShow, useUIStore } from '@app/store';

export default function FailedModuleButton() {
    const dialogOpen = useUIStore((s) => s.dialogToShow === 'failedModuleInitialization');
    const isAnyModuleFailed = useSetupStore(setupStoreSelectors.isAnyModuleFailed);
    return isAnyModuleFailed ? (
        <Wrapper>
            <DecorationWrapper $side="right">
                <Alert />
            </DecorationWrapper>

            <Button
                type="button"
                $isActive={dialogOpen}
                $isToggle={true}
                onClick={() => setDialogToShow('failedModuleInitialization')}
            >
                <svg width="37" height="40" viewBox="0 0 37 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M18.4369 9.7408C18.4369 9.49791 18.6697 9.32149 18.9053 9.38672L23.5946 10.6805C23.8341 10.747 23.9999 10.9637 23.9999 11.2116V11.9622C24 12.0722 24.0744 12.1693 24.1808 12.198L24.1843 12.1989L25.8876 12.6988C26.134 12.771 26.313 12.9829 26.343 13.2367L26.4288 13.9678C26.4586 14.145 26.6007 14.2814 26.7797 14.3042L26.8596 14.3144C27.2395 14.363 27.5248 14.6845 27.5248 15.0665V16.9638C27.5249 17.0931 27.6013 17.21 27.7194 17.2622L28.3634 17.5466C28.6329 17.6661 28.8067 17.9323 28.8067 18.2254V22.838H28.7862C28.7394 23.0181 28.6117 23.1703 28.4352 23.246L28.4349 23.2463L27.6118 23.5969C27.5186 23.6367 27.4572 23.728 27.4555 23.8284L27.4328 25.0956C27.429 25.3075 27.232 25.4631 27.024 25.419L26.3672 25.2807L26.3536 25.2794C26.3266 25.2797 26.3022 25.2974 26.2939 25.3234L26.2911 25.337L26.2336 25.96C26.209 26.2498 25.9302 26.451 25.6455 26.381L23.791 25.9251L23.7892 25.9248C23.7188 25.9066 23.6488 25.954 23.6397 26.0257L23.5449 26.7793V26.7799C23.5181 26.9844 23.316 27.1198 23.1153 27.065L18.7602 25.8715L18.6949 25.8505C18.3973 25.7398 18.1989 25.4547 18.1994 25.1383L18.2028 25.0702L18.2383 24.6799C18.2544 24.501 18.1428 24.3343 17.97 24.2806L17.9697 24.281L16.2051 23.739L16.2054 23.7387C15.8936 23.6431 15.6838 23.3544 15.6888 23.0299L15.6981 22.4558C15.7003 22.3023 15.5983 22.1663 15.451 22.1246L14.9537 21.9828C14.6254 21.8892 14.3995 21.5902 14.3995 21.2505L14.4007 19.5266C14.4002 19.4013 14.326 19.2879 14.2108 19.2369L13.7725 19.0431C13.4526 18.9016 13.2463 18.5853 13.2463 18.2368V13.8981C13.2464 13.6016 13.5321 13.3885 13.8176 13.471L14.18 13.5753C14.3539 13.6256 14.5281 13.4954 14.5281 13.3147V11.5205C14.5282 11.2504 14.7663 11.0465 15.028 11.0776L15.0805 11.0869L15.5468 11.1983C15.6602 11.2253 15.7697 11.1485 15.7855 11.037L15.7873 11.0141L15.7995 10.5022C15.8069 10.2 16.0855 9.98309 16.3748 10.0367L16.4329 10.0512L18.3573 10.6539C18.3965 10.6661 18.4368 10.6369 18.4369 10.5957V9.7408ZM18.823 9.68199C18.7835 9.67109 18.7447 9.70039 18.7446 9.7408V10.5957C18.7445 10.8442 18.5019 11.0205 18.2647 10.946L16.3406 10.3434L16.3192 10.3382C16.2126 10.3185 16.1097 10.3985 16.1069 10.5096L16.0951 11.0216L16.0901 11.0804C16.0495 11.3679 15.7666 11.5657 15.4749 11.4963L15.0084 11.3846C14.9207 11.3638 14.8359 11.4304 14.8359 11.5205V13.3147C14.8358 13.6993 14.4652 13.9769 14.0942 13.8697L14.0945 13.8694L13.7318 13.7654C13.6429 13.7397 13.5541 13.8059 13.554 13.8981V18.2368C13.554 18.4643 13.6887 18.6706 13.8975 18.763L14.3357 18.9571C14.5614 19.0571 14.7075 19.2792 14.7084 19.5253L14.7072 21.2509L14.7087 21.2886C14.7243 21.4756 14.8544 21.6357 15.0385 21.6882L15.5359 21.8299C15.8178 21.9099 16.0102 22.1697 16.0059 22.461L15.9962 23.0349L15.9972 23.0698C16.0079 23.2323 16.1111 23.374 16.2626 23.4344L16.2959 23.4462L18.0605 23.9882C18.3719 24.0844 18.5741 24.3844 18.5448 24.7078L18.509 25.0981C18.489 25.3161 18.6297 25.518 18.8416 25.5759L23.197 26.7694C23.2114 26.7732 23.2267 26.7672 23.2346 26.7549L23.2396 26.7403L23.3344 25.987C23.3669 25.7332 23.615 25.5643 23.8647 25.6276L25.7192 26.0835C25.8191 26.1081 25.9183 26.0373 25.9268 25.9337L25.9271 25.9322L25.9849 25.3085L25.9908 25.268C26.0315 25.0701 26.2275 24.9382 26.431 24.9811L27.0881 25.1194C27.1069 25.1234 27.1247 25.1091 27.1251 25.09L27.1481 23.8229C27.1517 23.6153 27.27 23.4274 27.4533 23.3329L27.4909 23.3153L28.3134 22.9646C28.4254 22.9166 28.4983 22.8066 28.4983 22.6848V22.5319H28.499V18.2254C28.4989 18.0534 28.3971 17.8971 28.2385 17.8267L27.5944 17.542L27.5525 17.5216C27.3471 17.4122 27.2171 17.1984 27.2171 16.9638V15.0665C27.2171 14.8392 27.0474 14.6472 26.8208 14.6181L26.7406 14.6082C26.4271 14.5681 26.1773 14.329 26.1251 14.0185L26.1245 14.0148L26.1242 14.0108L26.0375 13.2726C26.0218 13.1403 25.9285 13.03 25.8006 12.9925L24.0972 12.4927L24.0975 12.4923C23.8581 12.4264 23.6922 12.2091 23.6922 11.9622V11.2116C23.6921 11.1015 23.6189 11.0051 23.5122 10.9754L18.823 9.68199Z"
                        fill="currentColor"
                    />
                    <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M15.9257 0.449626C15.9257 0.152945 16.2104 -0.0628946 16.4976 0.0166214L26.3194 2.72731C26.6817 2.82694 26.9327 3.15568 26.9327 3.52987V5.10249C26.9327 5.47866 27.1859 5.80806 27.5503 5.90628L31.1181 6.95274C31.5107 7.06837 31.7966 7.40542 31.8436 7.81039L32.0241 9.35732C32.1094 9.86786 32.5208 10.2615 33.0362 10.327L33.2035 10.3484C33.839 10.4293 34.3153 10.9674 34.3153 11.6056V15.5791C34.3153 15.976 34.5505 16.3363 34.9149 16.4974L36.2636 17.0941C36.7113 17.292 37 17.7338 37 18.2217V27.563L36.9966 27.5624C36.9965 27.9446 36.7677 28.2907 36.4141 28.4417L34.6905 29.1777C34.3785 29.3107 34.1737 29.6134 34.1677 29.9515L34.1195 32.6052C34.117 32.7341 34.0515 32.8443 33.9554 32.9119C33.9617 32.9087 33.9676 32.9067 33.9722 32.9039L26.2625 38.8876L24.9763 38.3336L23.5505 37.9836L21.1797 39.7007C21.0664 39.9245 20.806 40.0513 20.5472 39.9802L11.4241 37.4812C11.2086 37.4222 11.017 37.316 10.8581 37.1764C10.6906 37.0464 10.563 36.8715 10.4907 36.6719C10.3987 36.4596 10.3573 36.223 10.3794 35.9795L10.4232 35.4998V35.0222C10.4232 34.8967 10.4022 34.7751 10.3636 34.661C10.2499 34.4227 10.0406 34.2333 9.77298 34.1509L6.07777 33.0156C5.97946 32.9854 5.88667 32.9447 5.80019 32.8952C5.42164 32.7409 5.15372 32.3902 5.11325 31.9775L4.98487 30.6804C4.94594 30.2855 4.66955 29.9532 4.28704 29.8416L3.1326 29.5055C2.64199 29.3625 2.30627 28.9113 2.31231 28.4021L2.36204 24.2228C2.36301 24.1396 2.35112 24.0584 2.32847 23.9813C2.24301 23.8128 2.10132 23.6742 1.92096 23.5942L1.00276 23.1881C0.392843 22.9182 2.01662e-05 22.316 0 21.652V12.5645C3.68404e-05 12.0722 0.459394 11.7122 0.934683 11.8195L0.980686 11.8312L1.73975 12.0504C2.21243 12.187 2.68531 11.8336 2.68531 11.3428V7.58383C2.68533 7.08849 3.1501 6.72333 3.63398 6.83853L4.61187 7.0719C4.96858 7.15726 5.31396 6.89275 5.32306 6.52685L5.34855 5.45502C5.36168 4.88973 5.91554 4.4959 6.45668 4.66546L7.73701 5.06658V4.17798C7.73709 3.78176 8.10887 3.48968 8.49607 3.58186L9.47396 3.81524C9.92623 3.92278 10.3639 3.58803 10.3748 3.12503L10.4002 2.05289C10.4117 1.59047 10.8646 1.26704 11.3082 1.40601L15.3391 2.6685C15.6296 2.75933 15.9255 2.54281 15.9257 2.23952V0.449626ZM10.7645 35.0714C10.7646 35.0925 10.7652 35.1136 10.7642 35.1348L10.7602 35.1909L10.6859 36.0074C10.6369 36.5463 10.9821 37.0422 11.5056 37.1857L11.6209 37.2172L15.9247 33.894C15.4898 33.6126 15.2306 33.1084 15.2794 32.5715L15.3419 31.8872L10.7645 35.0714ZM30.7786 34.9928C30.7786 34.9928 30.7919 34.9957 30.815 34.999C30.8019 34.9966 30.7886 34.995 30.7755 34.9918C30.7772 34.9924 30.7786 34.9928 30.7786 34.9928ZM31.6148 34.3245C31.6251 34.2646 31.633 34.1996 31.6372 34.1289C31.6403 34.0746 31.6439 34.0223 31.6474 33.9723L31.6148 34.3245ZM32.2765 32.6848C32.0108 32.6286 31.7543 32.8165 31.7295 33.0865L31.6909 33.5022C31.7537 32.9791 31.8277 32.8516 31.8277 32.8516C31.8295 32.8482 31.9378 32.6522 32.2818 32.6857L32.2765 32.6848ZM32.5171 32.7361C33.0384 32.9029 33.3808 32.9573 33.6032 32.9643L32.5078 32.7334C32.5109 32.7343 32.5141 32.7352 32.5171 32.7361ZM5.43931 30.6825L5.42253 31.6984L5.4247 31.7856C5.45304 32.2179 5.74663 32.5932 6.16853 32.7228L6.28696 32.759L10.8715 29.5699C10.3502 29.3614 10.0059 28.8517 10.0151 28.2848L10.0235 27.7639L5.43931 30.6825ZM17.6903 4.7676C17.4796 4.70951 17.2716 4.86704 17.2716 5.08484V6.39624C17.2715 6.61866 17.0547 6.77685 16.842 6.71008L13.8897 5.78527C13.5648 5.68368 13.2326 5.9203 13.2245 6.25912L13.2058 7.04435C13.1978 7.3838 12.8775 7.62896 12.5459 7.54947L11.8298 7.37862C11.5466 7.31116 11.274 7.52501 11.274 7.81503V10.5681C11.274 11.0018 10.8559 11.3148 10.4379 11.1946L9.88208 11.0339C9.59487 10.9511 9.30828 11.1658 9.30828 11.4638V18.1208C9.30836 18.5631 9.57028 18.964 9.97627 19.1431L10.6486 19.4405C10.9103 19.5562 11.0787 19.8142 11.08 20.0989L11.0782 22.7452C11.0782 23.1615 11.3554 23.5279 11.7574 23.6421L12.5205 23.8594C12.8499 23.953 13.0753 24.2555 13.07 24.597L13.0554 25.4772C13.0487 25.8701 13.3036 26.2211 13.6814 26.3367L16.3882 27.1687C16.7599 27.283 17.0012 27.6411 16.9663 28.0273L16.9119 28.6255C16.871 29.0739 17.1583 29.4877 17.5945 29.6067L24.2772 31.4377C24.4462 31.4837 24.6174 31.3702 24.639 31.1973L24.7839 30.0409C24.8154 29.7903 25.061 29.6246 25.3067 29.6881L28.1518 30.3873C28.4477 30.46 28.7384 30.2507 28.7625 29.9487L28.8511 28.9917C28.8693 28.7939 29.0572 28.6562 29.2518 28.6977L30.2598 28.9103C30.4336 28.9469 30.5987 28.8165 30.6021 28.6395L30.6375 26.6954C30.6422 26.4482 30.792 26.2263 31.0208 26.1287L32.2834 25.5902C32.5424 25.4799 32.7101 25.2257 32.7102 24.9458H32.7074V18.1031C32.7073 17.7464 32.496 17.4224 32.1687 17.2774L31.1799 16.8403C30.9128 16.7221 30.741 16.4585 30.741 16.1672V13.2568C30.741 12.7897 30.392 12.3956 29.9269 12.336L29.8042 12.3206C29.4264 12.2725 29.125 11.9837 29.0625 11.6102L28.9301 10.4768C28.8952 10.1801 28.6864 9.9334 28.3992 9.84851L25.786 9.08185C25.5189 9.00968 25.3334 8.76848 25.3334 8.49317V7.34117C25.3334 7.06722 25.1496 6.82666 24.8846 6.7531L17.6903 4.7676ZM2.72199 24.2587C2.72471 24.2897 2.72649 24.3209 2.72665 24.3524L2.72385 27.9663C2.72336 28.4345 3.01599 28.8502 3.45059 29.0137L3.53917 29.0431L3.80152 29.1174L8.101 25.8291C7.64369 25.5987 7.33897 25.1377 7.31738 24.6171L7.31614 24.5577L7.31862 21.2505L2.72199 24.2587ZM6.36405 4.95764C6.01799 4.84932 5.66435 5.10126 5.65596 5.46214L5.63048 6.53428C5.61664 7.09453 5.088 7.50078 4.54006 7.36965L3.56249 7.13659C3.27189 7.06738 2.99306 7.28662 2.99304 7.58383V11.3428C2.99304 12.0376 2.32358 12.5382 1.65396 12.3447L0.894896 12.1256L0.839878 12.1132C0.565383 12.0683 0.307763 12.279 0.307727 12.5645V21.652C0.307743 22.0785 0.506541 22.4731 0.83335 22.73L5.40108 19.4387C5.08614 19.1287 4.90002 18.7011 4.90001 18.2437V9.15614C4.90007 8.64764 5.39061 8.28169 5.8807 8.42291L6.63976 8.64204C7.11329 8.77811 7.58532 8.4245 7.58532 7.9345V5.34019L6.36405 4.95764Z"
                        fill="currentColor"
                    />
                </svg>
            </Button>
        </Wrapper>
    ) : null;
}
